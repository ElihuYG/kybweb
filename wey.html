<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Untamed - KYB</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Calificación (localStorage)
    function rate(n) {
      localStorage.setItem("theuntamed_rating", n);
      renderStars();
    }
    function renderStars() {
      const val = localStorage.getItem("theuntamed_rating") || 0;
      document.querySelectorAll(".star").forEach((el, i) => {
        el.classList.toggle("text-yellow-400", i < val);
      });
    }

    // Mi Lista (localStorage)
    function toggleList() {
      const exists = localStorage.getItem("in_list_theuntamed") === "true";
      localStorage.setItem("in_list_theuntamed", !exists);
      document.getElementById("listIcon").classList.toggle("animate-bounce", !exists);
    }
    function isInList() {
      return localStorage.getItem("in_list_theuntamed") === "true";
    }
    function setupPage() {
      renderStars();
      if (isInList()) document.getElementById("listIcon").classList.add("animate-bounce");
    }
    window.onload = setupPage;
  </script>
</head>
<body class="bg-slate-900 text-white font-sans">
  <!-- Header -->
  <nav class="flex justify-between items-center p-4">
    <a href="home.html">
      <img src="/icons/home.png" class="h-6 w-6" alt="Home" />
    </a>
    <h1 class="text-xl font-bold">The Untamed</h1>
  </nav>

  <!-- Portada -->
  <div class="relative w-full max-w-5xl mx-auto">
    <img src="/img/theuntamed-cover.jpg" alt="The Untamed" class="rounded-xl w-full object-cover max-h-[500px]" />
  </div>

  <!-- Info -->
  <section class="max-w-5xl mx-auto p-4 space-y-4">
    <div class="flex items-center justify-between">
      <button onclick="toggleList()" class="bg-white rounded-full p-2">
        <img id="listIcon" src="/icons/netflix-mylist.png" class="h-6 w-6" alt="Mi Lista" />
      </button>
      <button onclick="document.getElementById('ratingModal').classList.remove('hidden')" class="bg-white rounded-full p-2">
        <img src="/icons/star.png" class="h-6 w-6" alt="Valorar" />
      </button>
    </div>

    <p class="text-gray-300">
      <strong>Género:</strong> Fantasía, Acción, Romance &bull;
      <strong>País:</strong> China &bull;
      <strong>Idioma:</strong> Subtitulado &bull;
      <strong>Duración:</strong> 50min &bull;
      <strong>+13</strong>
    </p>

    <div class="border border-gray-500 p-3 rounded">
      <p class="text-sm text-gray-200">
        La historia sigue a Wei Wuxian y Lan Wangji mientras descubren una conspiración que se remonta a generaciones, todo envuelto en acción sobrenatural, bromance, y drama político.
      </p>
    </div>

    <!-- Trailer -->
    <div class="aspect-w-16 aspect-h-9">
      <iframe class="w-full rounded-lg" src="https://www.youtube.com/embed/r5O5ZzfnQzk" frameborder="0" allowfullscreen></iframe>
    </div>

    <!-- Episodios -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-4">
      <!-- Lista de episodios -->
      <script>
        for (let i = 1; i <= 50; i++) {
          document.write(`
            <div class='bg-slate-800 hover:bg-emerald-600 transition-all rounded p-2 text-center cursor-pointer'>
              The Untamed 1x${i}
            </div>
          `);
        }
      </script>
    </div>
  </section>

  <!-- Modal Estrellas -->
  <div id="ratingModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-lg">
      <h2 class="text-black text-lg mb-2">¿Cuántas estrellas le das?</h2>
      <div class="flex gap-2 mb-4">
        <span class="star text-gray-400 cursor-pointer text-2xl" onclick="rate(1)">&#9733;</span>
        <span class="star text-gray-400 cursor-pointer text-2xl" onclick="rate(2)">&#9733;</span>
        <span class="star text-gray-400 cursor-pointer text-2xl" onclick="rate(3)">&#9733;</span>
        <span class="star text-gray-400 cursor-pointer text-2xl" onclick="rate(4)">&#9733;</span>
        <span class="star text-gray-400 cursor-pointer text-2xl" onclick="rate(5)">&#9733;</span>
      </div>
      <button onclick="document.getElementById('ratingModal').classList.add('hidden')" class="bg-emerald-600 text-white px-4 py-2 rounded">Listo</button>
    </div>
  </div>
</body>
</html>
